<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portrait Photography in Sarasota | Rachel Barton Photography</title>

  <!-- Primary SEO -->
  <meta name="description" content="Clean, candid, true-to-life portrait photography in Sarasota and along Florida’s Gulf Coast — with family, friend, and adventure sessions crafted to tell your story." />
  <link rel="canonical" href="https://rachelsphotography.netlify.app/portraits.html" />

  <!-- Social share -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Rachel Barton Photography" />
  <meta property="og:title" content="Portraits that Feel Like You — Rachel Barton Photography" />
  <meta property="og:description" content="Family, friend, and adventure portrait sessions with natural direction, flattering light, and timeless edits." />
  <meta property="og:url" content="https://rachelsphotography.netlify.app/portraits.html" />
  <meta property="og:image" content="https://rachelsphotography.netlify.app/pictures/portraitPageGal/E26A0759%20(2).jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Portraits that Feel Like You — Rachel Barton Photography" />
  <meta name="twitter:description" content="Sarasota & Gulf Coast portraits built for real life." />
  <meta name="twitter:image" content="https://rachelsphotography.netlify.app/pictures/portraitPageGal/E26A0759%20(2).jpg" />

  <!-- Fonts & shared layout (same as branding.html) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Manrope:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/layout.css?v=nav-5">

  <style>
    :root{
      --bg:#FAFAF8; --paper:#ffffff; --ink:#3e3e3a; --muted:#7a766e;
      --accent:#A88A5A; --accent-2:#E8DFC9; --line:#e9e6df;
      --ring: rgba(168,138,90,.25); --shadow: 0 10px 30px rgba(0,0,0,.08);
      --gap:clamp(16px,3vw,32px); --maxw:1200px;
      --nav-gap-top:16px; --nav-gap-bottom:40px;

      /* Tile controls & “glass” tokens (match branding style) */
      --arrow-size:54px;
      --arrow-inset:12px;
      --dot-size:10px;
      --dot-gap:9px;
      --glass-bg: rgba(255,255,255,.28);
      --glass-blur: blur(7px) saturate(1.05);
      --glass-border: 1px solid rgba(63,58,51,.18);
      --glass-shadow: 0 10px 22px rgba(0,0,0,.10);
    }
    .topbar{ padding-top:var(--nav-gap-top)!important; padding-bottom:var(--nav-gap-bottom)!important; }
    .nav-spacer, .page-top-spacer { height:0!important; }

    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0; background:var(--bg); color:var(--ink);
      font-family:"Source Sans 3", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; line-height:1.65;
    }
    a{ color:inherit; text-decoration:none; transition:color .15s ease, border-color .15s ease }
    a:hover, a:focus-visible{ color:var(--accent); outline:none }
    .container{ max-width:var(--maxw); margin:0 auto; padding:0 var(--gap) }
    img{ max-width:100%; display:block; height:auto; border:1px solid var(--line); box-shadow:0 6px 18px rgba(0,0,0,.06) }

    .eyebrow{ font-size:12px; letter-spacing:.16em; text-transform:uppercase; color:#6e6a62 }
    .h1{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; font-weight:700; font-size:clamp(32px,5vw,56px); line-height:1.08; margin:8px 0 10px }
    .lead{ font-size:clamp(16px,2.3vw,20px); color:#58554e; max-width:70ch }

    /* --- BUTTONS: EXACT COPY OF about.html --- */
    .btn{
      font-family:"Cormorant Garamond","Playfair Display",Georgia,"Times New Roman",serif;
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 16px;
      background:#fff; color:#3f3a33;
      border:1px solid var(--line);
      border-radius:0;
      font-weight:700; text-decoration:none;
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      transition:background-color .15s ease, border-color .15s ease, box-shadow .15s ease, transform .15s ease, color .15s ease;
    }
    .btn:hover, .btn:focus-visible{
      background:#fff;
      border-color:#dcd4c3; color:var(--accent);
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      transform:translateY(-1px);
      outline:none;
    }
    /* keep .btn.alt present but identical to .btn (no gradient) */
    .btn.alt{ background:#fff; }

    /* Hero (mirrors branding) */
    .hero{ padding:clamp(24px,6vw,56px) 0 }
    .hero-wrap{ display:grid; grid-template-columns: 1.1fr .9fr; gap:clamp(20px,4vw,40px); align-items:center }
    .hero-fig{ position:relative }
    .hero-fig img{ width:100%; aspect-ratio:4/5; object-fit:cover }
    .hero-badge{
      position:absolute; left:12px; top:12px; background:#fff; border:1px solid var(--line); padding:6px 10px;
      box-shadow:0 6px 18px rgba(0,0,0,.08); font-size:13px;
    }

    /* Value grid (like branding) */
    .value{ padding:clamp(20px,6vw,50px) 0 }
    .cards{ display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(12px,2vw,18px) }
    .card{ background:#fff; border:1px solid var(--line); padding:20px; box-shadow:0 6px 18px rgba(0,0,0,.06) }
    .card h3{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; margin:0 0 8px; font-size:22px }
    .card p{ margin:0 }

    /* TILE STRIP */
    .mosaic{ display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(12px,1.6vw,16px) }
    @media (max-width:960px){ .mosaic{ grid-template-columns:1fr 1fr } }
    @media (max-width:640px){ .mosaic{ grid-template-columns:1fr } }

    figure.tile{
      margin:0; position:relative; aspect-ratio:4/5; overflow:hidden;
      border-radius:0; border:1px solid var(--line); background:#ddd;
      box-shadow:0 6px 18px rgba(0,0,0,.06); isolation:isolate;
      transition:transform .2s ease, box-shadow .2s ease; cursor:pointer;
    }
    figure.tile:hover{ transform:translateY(-2px) }
    .tile-media{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; display:block;
    }

    /* Diamonds (pagination) */
    .tile-dots{
      position:absolute; left:50%; transform:translateX(-50%); top:12px; z-index:4;
      display:flex; gap:var(--dot-gap); pointer-events:auto;
    }
    .tile-dots button{
      width:var(--dot-size); height:var(--dot-size); transform:rotate(45deg);
      border:1px solid var(--accent); background:var(--glass-bg);
      -webkit-backdrop-filter:var(--glass-blur); backdrop-filter:var(--glass-blur);
      box-shadow:0 3px 10px rgba(0,0,0,.10); cursor:pointer; padding:0; border-radius:0;
      transition:transform .12s ease, background-color .12s ease, border-color .12s ease;
    }
    .tile-dots button:hover{ transform:rotate(45deg) scale(1.06) }
    .tile-dots button.is-active{ background:rgba(232,223,201,.45); border-color:var(--accent) }

    /* Arrow controls */
    .tile-nav{
      position:absolute; top:50%; transform:translateY(-50%) scale(.98);
      width:var(--arrow-size); height:var(--arrow-size);
      display:grid; place-items:center; color:var(--accent); cursor:pointer; user-select:none;
      border:0; background:transparent; z-index:5; opacity:0;
      transition:opacity .2s ease, transform .2s ease;
    }
    figure.tile:hover .tile-nav{ opacity:1; transform:translateY(-50%) scale(1) }
    .tile-prev{ left:var(--arrow-inset) } .tile-next{ right:var(--arrow-inset) }
    .tile-nav::before{
      content:""; position:absolute; inset:0; margin:7px; transform:rotate(45deg);
      background:var(--glass-bg); -webkit-backdrop-filter:var(--glass-blur); backdrop-filter:var(--glass-blur);
      border:var(--glass-border); box-shadow:var(--glass-shadow);
    }
    .tile-nav svg{ width:22px; height:22px; position:relative; z-index:1 }

    /* BELOW-TILES EXPLAINER */
    .explain{ padding:clamp(16px,5vw,40px) 0 0 }
    .explain .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(12px,2vw,18px); align-items:stretch; }
    .explain .item{
      background:#fff; border:1px solid var(--line); padding:18px; box-shadow:0 6px 18px rgba(0,0,0,.06);
      display:flex; flex-direction:column; /* ensures equal baseline for buttons */
    }
    .explain h4{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; margin:0 0 6px; font-size:20px }
    .explain p{ margin:0 0 8px; color:#5b574f }
    .explain ul{ margin:0 0 12px; padding-left:18px }
    .explain .btns{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:auto; /* push buttons to bottom for perfect alignment */
    }

    /* Packages */
    .packages{ padding:clamp(24px,6vw,56px) 0 }
    .pack{ background:#fff; border:1px solid var(--line); padding:22px; box-shadow:0 6px 18px rgba(0,0,0,.06) }
    .pack h3{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; margin:0 0 6px; font-size:22px }
    .pack p{ margin:0 0 8px }
    .pack ul{ margin:0; padding-left:18px }

    footer{ border-top:1px solid var(--line); padding:28px 0; color:#7f7f7f; }

    @media (max-width:980px){
      .hero-wrap{ grid-template-columns:1fr }
      .cards{ grid-template-columns:1fr 1fr }
      .explain .grid, .packages .cards{ grid-template-columns:1fr 1fr }
    }
    @media (max-width:640px){
      .cards, .mosaic, .explain .grid, .packages .cards{ grid-template-columns:1fr }
    }
  </style>
</head>
<body>
  <!-- Shared Top Nav -->
  <div data-include="/partials/topnav.html"></div>

  <main id="content">
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-wrap">
        <div>
          <div class="eyebrow">Portraits</div>
          <h1 class="h1">Clean, candid, true-to-life portraits you’ll be proud to share.</h1>
          <p class="lead">
            Calm, organized sessions in Sarasota & the Gulf Coast. Natural direction, flattering light, and timeless edits—so your photos feel like <em>you</em>, in the best light.
          </p>
          <div style="display:flex; gap:12px; margin-top:14px;">
            <a class="btn" href="/book.html">Book a Portrait Session</a>
            <a class="btn alt" href="/contact.html">Ask a Question</a>
          </div>
        </div>
        <figure class="hero-fig">
          <span class="hero-badge">Kid-wise • Natural • Timeless</span>
          <img src="/pictures/portraitPageGal/E26A0759%20(2).jpg" alt="Family laughing together in soft Gulf light" loading="eager" />
        </figure>
      </div>
    </section>

    <!-- VALUE PROPS -->
    <section class="value">
      <div class="container">
        <div class="cards">
          <div class="card">
            <h3>Guided, never stiff</h3>
            <p>We keep it moving with easy prompts and natural direction so expressions stay real and everyone looks their best.</p>
          </div>
          <div class="card">
            <h3>Color that ages well</h3>
            <p>True skin tones, clean contrast, and timeless edits—so your gallery looks premium on screens and in print for years.</p>
          </div>
          <div class="card">
            <h3>Prep made simple</h3>
            <p>Clear tips for outfits and locations, a relaxed flow on the day, and a smooth gallery delivery you can share instantly.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERIES (tiles) -->
    <section class="value" aria-labelledby="galleries-title">
      <div class="container">
        <div class="eyebrow">Galleries</div>
        <h2 class="h1" style="font-size:clamp(24px,3.6vw,36px)" id="galleries-title">Explore the feel of each session</h2>
        <div class="mosaic">
          <!-- FAMILY -->
          <figure class="tile" id="tile-family" data-link="/galleries/family-portrait.html"
            data-all-images='[
              "/pictures/familyPortrait/image1.jpg",
              "/pictures/familyPortrait/image2.jpg",
              "/pictures/familyPortrait/image3.jpg",
              "/pictures/familyPortrait/image4.jpg",
              "/pictures/familyPortrait/image5.jpg",
              "/pictures/familyPortrait/image6.jpg",
              "/pictures/familyPortrait/image7.jpg",
              "/pictures/familyPortrait/image8.jpg",
              "/pictures/familyPortrait/image9.jpg",
              "/pictures/familyPortrait/image10.jpg",
              "/pictures/familyPortrait/image11.jpg",
              "/pictures/familyPortrait/image12.jpg",

              "/pictures/siblingPortraitGal/E26A0671%20(3).jpg",
              "/pictures/siblingPortraitGal/E26A0674.jpg",
              "/pictures/siblingPortraitGal/E26A0691.jpg",
              "/pictures/siblingPortraitGal/E26A0693.jpg",
              "/pictures/siblingPortraitGal/E26A0695.jpg",
              "/pictures/siblingPortraitGal/E26A0698%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0699%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0701%20(2).jpg",
              "/pictures/siblingPortraitGal/E26A0702.jpg",
              "/pictures/siblingPortraitGal/E26A0712%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0718%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0720.jpg",
              "/pictures/siblingPortraitGal/E26A0722.jpg",
              "/pictures/siblingPortraitGal/E26A0734%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0739%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0753%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0755.jpg",
              "/pictures/siblingPortraitGal/E26A0758%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0759%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0761%20(1).jpg",
              "/pictures/siblingPortraitGal/E26A0764%20(1).jpg"
            ]'>
            <img class="tile-media" src="/pictures/familyPortrait/image1.jpg" alt="Family portraits preview" loading="lazy" />
            <div class="tile-dots" role="tablist" aria-label="Family slides"></div>
            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          </figure>

          <!-- ADVENTURE -->
          <figure class="tile" id="tile-adventure" data-link="/adventure.html"
            data-all-images='[
              "/pictures/andrewsBaldPics/E26A1013.jpg",
              "/pictures/andrewsBaldPics/E26A1022.jpg",
              "/pictures/andrewsBaldPics/E26A1033.jpg",
              "/pictures/andrewsBaldPics/E26A1045.jpg",
              "/pictures/andrewsBaldPics/E26A1062.jpg",
              "/pictures/andrewsBaldPics/E26A1063-2.jpg",
              "/pictures/andrewsBaldPics/E26A1087.jpg",
              "/pictures/andrewsBaldPics/E26A1094.jpg",
              "/pictures/andrewsBaldPics/E26A1095.jpg",
              "/pictures/andrewsBaldPics/E26A1098.jpg"
            ]'>
            <img class="tile-media" src="/pictures/andrewsBaldPics/E26A1013.jpg" alt="Adventure session preview" loading="lazy" />
            <div class="tile-dots" role="tablist" aria-label="Adventure slides"></div>
            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          </figure>

          <!-- FRIEND (thirdTileGal; preferred first) -->
          <figure class="tile" id="tile-friend" data-link="/galleries/friend-portraits.html"
            data-preferred="/pictures/thirdTileGal/E26A2771.jpg"
            data-all-images='[
              "/pictures/thirdTileGal/E26A2017.jpg",
              "/pictures/thirdTileGal/E26A2022%20(1).jpg",
              "/pictures/thirdTileGal/E26A2047-2.jpg",
              "/pictures/thirdTileGal/E26A2106.jpg",
              "/pictures/thirdTileGal/E26A2245.jpg",
              "/pictures/thirdTileGal/E26A2746.jpg",
              "/pictures/thirdTileGal/E26A2768.jpg",
              "/pictures/thirdTileGal/E26A2771.jpg",
              "/pictures/thirdTileGal/E26A2854.jpg",
              "/pictures/thirdTileGal/E26A2860.jpg"
            ]'>
            <img class="tile-media" src="/pictures/thirdTileGal/E26A2771.jpg" alt="Friend portraits preview" loading="lazy" />
            <div class="tile-dots" role="tablist" aria-label="Friend slides"></div>
            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          </figure>
        </div>

        <!-- BELOW-TILES EXPLAINER -->
        <div class="explain">
          <div class="grid">
            <div class="item">
              <h4>Family</h4>
              <p>Movement-first sessions with natural prompts—real connection, real laughs, flattering light.</p>
              <ul>
                <li>Perfect for family, maternity, newborn</li>
                <li>Locations across Sarasota & the Gulf Coast</li>
                <li>Timeless edits and easy delivery</li>
              </ul>
              <div class="btns">
                <a class="btn alt" href="/galleries/family-portrait.html">View Family Gallery</a>
              </div>
            </div>
            <div class="item">
              <h4>Adventure</h4>
              <p>Hills, dunes, wind, and play—story-driven portraits in big landscapes with lots of movement.</p>
              <ul>
                <li>Golden hour recommended</li>
                <li>Walking-friendly wardrobe & layers</li>
                <li>Cinematic, editorial energy</li>
              </ul>
              <div class="btns">
                <a class="btn alt" href="/adventure.html">View Adventure Gallery</a>
              </div>
            </div>
            <div class="item">
              <h4>Friend</h4>
              <p>Easygoing, stylish, and authentic—best friends, couples, or roomies with a dash of editorial.</p>
              <ul>
                <li>Choose laid-back or dressy looks</li>
                <li>Urban, beach, or nature settings</li>
                <li>Natural direction—no stiff posing</li>
              </ul>
              <div class="btns">
                <a class="btn alt" href="/galleries/friend-portrait.html">View Friend Gallery</a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- PACKAGES -->
    <section class="packages" id="packages">
      <div class="container">
        <div class="eyebrow">Packages</div>
        <h2 class="h1" style="font-size:clamp(24px,3.6vw,36px)">Choose your session</h2>
        <div class="cards">
          <div class="card pack">
            <h3>Mini — 30 min · $400</h3>
            <p>Short & sweet—perfect for quick updates and gifts.</p>
            <ul>
              <li>Single nearby location</li>
              <li>Immediate family or couple/friends</li>
              <li>Curated, edited gallery (web & hi-res)</li>
            </ul>
            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn" href="/book.html">Book Mini</a>
              <a class="btn alt" href="/contact.html">Ask a Question</a>
            </div>
          </div>
          <div class="card pack">
            <h3>Standard — 60 min · $600</h3>
            <p>Most popular—time to breathe, move, and explore.</p>
            <ul>
              <li>One location (walkable variety)</li>
              <li>Outfit guidance & gentle direction</li>
              <li>Expanded edited gallery (web & hi-res)</li>
            </ul>
            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn" href="/book.html">Book Standard</a>
              <a class="btn alt" href="/contact.html">Ask a Question</a>
            </div>
          </div>
          <div class="card pack">
            <h3>Deluxe — 90 min · $800</h3>
            <p>Extended storytelling—multiple looks and settings.</p>
            <ul>
              <li>Up to two nearby locations</li>
              <li>Wardrobe planning & expanded shot list</li>
              <li>Largest edited gallery (web & hi-res)</li>
            </ul>
            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn" href="/book.html">Book Deluxe</a>
              <a class="btn alt" href="/contact.html">Ask a Question</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Shared Footer -->
  <div data-include="/partials/footer.html"></div>
  <script src="/assets/include.js?v=nav-5" defer></script>

  <!-- Tiles JS (preferred image first, rest shuffled + focal points) -->
  <script>
    (function(){
      const MAX_IMGS = 10;

      /* Per-image focal points (where the subject is).
         Format: "x% y%" — lower y% lifts the crop upward.
         Edit these values whenever you want to nudge the subject. */
      const FOCALS = {
        "/pictures/thirdTileGal/E26A2017.jpg":  "50% 38%",
        "/pictures/thirdTileGal/E26A2022 (1).jpg": "50% 35%",
        "/pictures/thirdTileGal/E26A2047-2.jpg": "50% 42%",
        "/pictures/thirdTileGal/E26A2106.jpg":  "48% 40%",
        "/pictures/thirdTileGal/E26A2245.jpg":  "50% 36%",
        "/pictures/thirdTileGal/E26A2746.jpg":  "52% 68%",
        "/pictures/thirdTileGal/E26A2768.jpg":  "50% 34%",
        "/pictures/thirdTileGal/E26A2771.jpg":  "50% 32%", // always-first
        "/pictures/thirdTileGal/E26A2854.jpg":  "50% 40%",
        "/pictures/thirdTileGal/E26A2860.jpg":  "30% 37%"
      };

      function shuffled(arr){
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      document.querySelectorAll('figure.tile').forEach(tile=>{
        const media    = tile.querySelector('.tile-media');
        const dotsWrap = tile.querySelector('.tile-dots');
        const prevBtn  = tile.querySelector('.tile-prev');
        const nextBtn  = tile.querySelector('.tile-next');
        const link     = tile.getAttribute('data-link');
        const preferred= (tile.getAttribute('data-preferred') || '').trim();

        let all = [];
        try { all = JSON.parse(tile.getAttribute('data-all-images') || '[]'); } catch{}
        if (!Array.isArray(all) || !all.length) return;

        // Build list with preferred first (if provided), others shuffled, limit MAX_IMGS
        const others = all.filter(src => src !== preferred);
        const mixed  = shuffled(others);
        const list   = preferred ? [preferred, ...mixed.slice(0, Math.max(0, MAX_IMGS - 1))]
                                 : mixed.slice(0, MAX_IMGS);

        let idx = 0;

        // Dots (diamonds)
        dotsWrap.innerHTML = '';
        const dots = list.map((_,i)=>{
          const b = document.createElement('button');
          b.type = 'button';
          b.setAttribute('role','tab');
          b.setAttribute('aria-label','Go to slide ' + (i+1));
          b.addEventListener('click', e => { e.stopPropagation(); show(i); });
          dotsWrap.appendChild(b);
          return b;
        });

        function updateDots(){
          dots.forEach((d,i)=>{
            d.classList.toggle('is-active', i === idx);
            d.setAttribute('aria-selected', i === idx ? 'true' : 'false');
          });
        }

        function applyFocal(src){
          media.style.objectPosition = FOCALS[src] ? FOCALS[src] : "50% 50%";
        }

        function show(i){
          idx = (i + list.length) % list.length;
          const src = list[idx];
          if (src){
            media.src = src;
            applyFocal(src);
          }
          updateDots();
        }

        prevBtn?.addEventListener('click', e => { e.stopPropagation(); show(idx - 1); });
        nextBtn?.addEventListener('click', e => { e.stopPropagation(); show(idx + 1); });

        // Click-through anywhere on the tile (except controls)
        tile.addEventListener('click', e => {
          if (e.target.closest('.tile-nav') || e.target.closest('.tile-dots')) return;
          if (link) window.location.href = link;
        });

        // Init after fonts settle to avoid layout jumps
        if (document.fonts && document.fonts.ready) {
          document.fonts.ready.then(()=> show(0));
        } else {
          window.addEventListener('load', ()=> show(0));
        }
      });
    })();
  </script>
</body>
</html>
