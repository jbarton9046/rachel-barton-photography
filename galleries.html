<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galleries & Services | Rachel Barton Photography</title>

  <!-- Primary SEO -->
  <meta name="description" content="Explore Rachel Barton’s signature galleries—Portraits, Branding, and Events—then jump into the service that fits. Clean, candid, true-to-life photography along Florida’s Gulf Coast." />
  <link rel="canonical" href="https://rachelsphotography.netlify.app/galleries.html" />

  <!-- Social share -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Rachel Barton Photography" />
  <meta property="og:title" content="Galleries & Services — Portraits, Branding, Events" />
  <meta property="og:description" content="See the look, feel the energy, and book the service that fits your story." />
  <meta property="og:url" content="https://rachelsphotography.netlify.app/galleries.html" />
  <meta property="og:image" content="https://rachelsphotography.netlify.app/pictures/introEventPics/E26A1309.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Galleries & Services — Portraits, Branding, Events" />
  <meta name="twitter:description" content="Clean, candid, true-to-life photography along Florida’s Gulf Coast." />
  <meta name="twitter:image" content="https://rachelsphotography.netlify.app/pictures/introEventPics/E26A1309.jpg" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Manrope:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Shared layout (nav/footer) -->
  <link rel="stylesheet" href="/assets/layout.css?v=nav-5">

  <style>
    :root{
      --bg:#FAFAF8; --paper:#ffffff; --ink:#3e3e3a; --muted:#7a766e;
      --accent:#A88A5A; --accent-2:#E8DFC9; --line:#e9e6df;
      --ring: rgba(168,138,90,.25); --shadow: 0 10px 30px rgba(0,0,0,.08);
      --gap:clamp(16px,3vw,32px); --maxw:1200px;
      --nav-gap-top:16px; --nav-gap-bottom:40px;
    }
    .topbar{ padding-top:var(--nav-gap-top)!important; padding-bottom:var(--nav-gap-bottom)!important; }
    .nav-spacer, .page-top-spacer { height:0!important; }

    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0; background:var(--bg); color:var(--ink);
      font-family:"Source Sans 3", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      line-height:1.65; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    a{color:inherit; text-decoration:none; transition:color .15s ease, border-color .15s ease}
    a:hover, a:focus-visible{ color:var(--accent); outline:none }
    img{max-width:100%; height:auto; display:block; border-radius:0; border:1px solid var(--line); box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .container{max-width:var(--maxw); margin:0 auto; padding:0 var(--gap)}

    /* Page intro */
    header.page-intro{ padding:clamp(24px,6vw,56px) 0 8px; text-align:center }
    .eyebrow{ font-size:12px; letter-spacing:.16em; text-transform:uppercase; color:#6e6a62 }
    .h1{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; font-weight:700; font-size:clamp(28px,5vw,52px); line-height:1.08; margin:8px 0 10px }
    .lead{ font-size:clamp(16px,2.1vw,20px); color:#58554e; max-width:72ch; margin:0 auto }

    section{padding:calc(var(--gap)*1.4) 0}
    .section-title{
      font-family:"Cormorant Garamond","Playfair Display",Georgia,"Times New Roman",serif;
      font-size:clamp(24px,3.5vw,38px);
      margin:0 0 14px;
    }
    .section-sub{color:#67635b; margin:0 0 22px}

    .title-row{ display:flex; align-items:flex-start; justify-content:space-between; gap:16px; }
    .title-row .btn{ align-self:flex-start; }

    /* Mosaic tiles */
    .mosaic{display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(10px,1.6vw,16px)}
    .mosaic figure{margin:0}
    .mosaic .captioned.notch{position:relative; display:block}
    .mosaic .notch-figure{display:block; width:100%; aspect-ratio:4/5; background:transparent; border:1px solid transparent; box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .mosaic .u-stroke{fill:none; stroke:#ecebea; stroke-width:1; vector-effect:non-scaling-stroke; stroke-linejoin:round}

    /* Tile controls */
    #gallery-meadow .tile-nav, #gallery-family .tile-nav, #gallery-beach .tile-nav{
      position:absolute; top:50%; transform:translateY(-50%) scale(.98);
      background:transparent !important; border:0 !important; width:56px; height:56px; display:grid; place-items:center;
      color:var(--accent); cursor:pointer; user-select:none; z-index:4; opacity:0; transition:opacity .2s ease, transform .2s ease, color .2s ease, box-shadow .2s ease;
    }
    #gallery-meadow:hover .tile-nav, #gallery-family:hover .tile-nav, #gallery-beach:hover .tile-nav{ opacity:1; transform:translateY(-50%) scale(1); }
    #gallery-meadow .tile-prev, #gallery-family .tile-prev, #gallery-beach .tile-prev{ left:10px; }
    #gallery-meadow .tile-next, #gallery-family .tile-next, #gallery-beach .tile-next{ right:10px; }
    #gallery-meadow .tile-nav::before, #gallery-family .tile-nav::before, #gallery-beach .tile-nav::before{
      content:""; position:absolute; inset:0; margin:7px; transform:rotate(45deg); background:rgba(255,255,255,.22); -webkit-backdrop-filter:blur(7px) saturate(1.05); backdrop-filter:blur(7px) saturate(1.05); box-shadow:0 6px 18px rgba(0,0,0,.14);
    }
    #gallery-meadow .tile-nav::after, #gallery-family .tile-nav::after, #gallery-beach .tile-nav::after{
      content:""; position:absolute; inset:0; margin:7px; transform:rotate(45deg); border:1.5px solid var(--accent);
    }
    #gallery-meadow .tile-nav svg, #gallery-family .tile-nav svg, #gallery-beach .tile-nav svg{ width:22px; height:22px; position:relative; z-index:2 }

    /* Dots: tucked closer & a touch larger */
    #gallery-meadow .tile-dots, #gallery-family .tile-dots, #gallery-beach .tile-dots{
      position:absolute; left:50%; transform:translateX(-50%); bottom:22px;
      display:flex; gap:10px; z-index:4; pointer-events:auto;
    }
    #gallery-meadow .tile-dots button, #gallery-family .tile-dots button, #gallery-beach .tile-dots button{
      position:relative; width:12px; height:12px; transform:rotate(45deg);
      border:1px solid var(--accent); background:transparent !important; border-radius:0; padding:0; cursor:pointer; opacity:.95;
      transition:transform .15s ease, background-color .15s ease, opacity .15s ease, border-color .15s ease;
    }
    #gallery-meadow .tile-dots button::before, #gallery-family .tile-dots button::before, #gallery-beach .tile-dots button::before{
      content:""; position:absolute; inset:-2px; background:rgba(255,255,255,.2); -webkit-backdrop-filter:blur(4px) saturate(1.05); backdrop-filter:blur(4px) saturate(1.05); z-index:-1;
    }
    #gallery-meadow .tile-dots button.is-active{ border-color:var(--accent); }
    #gallery-meadow .tile-dots button.is-active::before, #gallery-family .tile-dots button.is-active::before, #gallery-beach .tile-dots button.is-active::before{
      background:rgba(168,138,90,.22);
    }

    /* Service blurbs under the tiles */
    .service-blurbs{ margin-top:clamp(18px,3vw,28px); }
    .service-blurbs .row{ display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(12px,2vw,18px); }
    .blurb{ background:#fff; border:1px solid var(--line); padding:16px; box-shadow:0 6px 18px rgba(0,0,0,.06) }
    .blurb h3{ font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; margin:0 0 6px; font-size:20px }
    .blurb p{ margin:0 0 10px; color:#5b574f }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; font-family:"Cormorant Garamond","Playfair Display",Georgia,serif; font-weight:700; background:#fff; color:#3f3a33; border:1px solid rgba(63,58,51,.85); padding:10px 16px; border-radius:0; box-shadow:0 6px 18px rgba(0,0,0,.06); transition:color .15s ease, border-color .15s ease, transform .15s ease, box-shadow .15s ease; }
    .btn:hover{ color:var(--accent); border-color:var(--accent); transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.08); }

    footer{ border-top:1px solid var(--line); padding:28px 0; color:#7f7f7f; }
    footer .container{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; }
    @media (max-width:960px){ .mosaic{grid-template-columns:1fr 1fr} .service-blurbs .row{ grid-template-columns:1fr 1fr } }
    @media (max-width:640px){ .mosaic{grid-template-columns:1fr} .service-blurbs .row{ grid-template-columns:1fr } }
  </style>
</head>
<body>
  <!-- Shared Top Nav -->
  <div data-include="/partials/topnav.html"></div>

  <main id="content">
    <header class="page-intro">
      <div class="container">
        <div class="eyebrow">Galleries & Services</div>
        <h1 class="h1">Choose your story—then let’s make it beautiful</h1>
        <p class="lead">These living tiles preview how each service feels. Click through the images, then tap the label to explore Portraits, Branding, or Events in depth.</p>
      </div>
    </header>

    <section id="portfolio" aria-labelledby="portfolio-title">
      <div class="container">
        <div class="title-row" style="align-items:end;">
          <h2 class="section-title" id="portfolio-title">Signature Galleries</h2>
          <a class="btn" href="/book.html">Book a Session</a>
        </div>

        <p class="section-sub">Candid, timeless, true-to-life work—made to feel like you, in the best light.</p>

        <!-- Tiles -->
        <div class="mosaic" id="grid">
          <!-- LEFT — PORTRAITS -->
          <figure class="captioned notch" id="gallery-meadow" aria-label="Portraits"
                  data-images='[
                    "pictures/introPortPics/E26A0702%20(1).jpg",
                    "pictures/introPortPics/E26A0712%20(2).jpg",
                    "pictures/introPortPics/E26A0739%20(2).jpg",
                    "pictures/introPortPics/E26A0753%20(2).jpg",
                    "pictures/introPortPics/E26A1931%20(2).jpg",
                    "pictures/introPortPics/E26A2047-2%20(2).jpg",
                    "pictures/introPortPics/E26A2237%20(1).jpg",
                    "pictures/introPortPics/E26A2245%20(2).jpg",
                    "pictures/introPortPics/E26A2465-2%20(2).jpg",
                    "pictures/introPortPics/E26A2614%20(1).jpg",
                    "pictures/introPortPics/E26A2665%20(1).jpg"
                  ]'>
            <svg class="notch-figure" viewBox="0 0 800 1000" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
              <defs>
                <mask id="notchMask-3a">
                  <rect x="0" y="0" width="100%" height="100%" fill="white" />
                  <rect class="notchRect" x="260" y="920" width="280" height="80" fill="black" />
                </mask>
                <filter id="frameShadow-3a" x="-20%" y="-20%" width="140%" height="140%">
                  <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="rgba(0,0,0,0.18)" />
                </filter>
              </defs>
              <!-- Start on the requested Portrait image -->
              <image href="pictures/introPortPics/E26A2614%20(1).jpg" x="0" y="0" width="800" height="1000"
                     preserveAspectRatio="xMidYMid meet" mask="url(#notchMask-3a)"></image>
              <g class="frameGroup" filter="url(#frameShadow-3a)">
                <path class="u-stroke framePath" d="M .5 .5 H 799.5 V 999.5 H .5 Z" />
                <rect class="u-stroke recessStroke" x="260" y="920" width="280" height="80" />
              </g>
            </svg>

            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
            </button>

            <div class="tile-dots" aria-label="Slide navigation" role="tablist"></div>
            <!-- label removed as requested -->
          </figure>

          <!-- MIDDLE — BRANDING -->
          <figure class="captioned notch" id="gallery-family" aria-label="Branding"
                  data-images='[
                    "pictures/introBrandPics/adam-winger--THiqda3iGM-unsplash.jpg",
                    "pictures/introBrandPics/ali-mkumbwa-PxlKOcj0a3Q-unsplash.jpg",
                    "pictures/introBrandPics/man-clutching-his-leather-duffle-bag.jpg",
                    "pictures/introBrandPics/pexels-leeloothefirst-8970679.jpg",
                    "pictures/introBrandPics/pexels-oliver-mussiett-131960-639146.jpg",
                    "pictures/introBrandPics/pexels-picturemechaniq-1749303.jpg",
                    "pictures/introBrandPics/s-o-c-i-a-l-c-u-t-7KkDiSs5UdQ-unsplash.jpg",
                    "pictures/introBrandPics/tim-mossholder-qvWnGmoTbik-unsplash.jpg"
                  ]'>
            <svg class="notch-figure" viewBox="0 0 800 1000" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
              <defs>
                <mask id="notchMask-1">
                  <rect x="0" y="0" width="100%" height="100%" fill="white" />
                  <rect class="notchRect" x="260" y="920" width="280" height="80" fill="black" />
                </mask>
                <filter id="frameShadow-1" x="-20%" y="-20%" width="140%">
                  <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="rgba(0,0,0,0.18)" />
                </filter>
              </defs>
              <image href="pictures/introBrandPics/adam-winger--THiqda3iGM-unsplash.jpg" x="0" y="0" width="800" height="1000"
                     preserveAspectRatio="xMidYMid meet" mask="url(#notchMask-1)"></image>
              <g class="frameGroup" filter="url(#frameShadow-1)">
                <path class="u-stroke framePath" d="M .5 .5 H 799.5 V 999.5 H .5 Z" />
                <rect class="u-stroke recessStroke" x="260" y="920" width="280" height="80" />
              </g>
            </svg>

            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
            </button>

            <div class="tile-dots" aria-label="Slide navigation" role="tablist"></div>
            <!-- label removed as requested -->
          </figure>

          <!-- RIGHT — EVENTS (kids photo first) -->
          <figure class="captioned notch" id="gallery-beach" aria-label="Events"
                  data-images='[
                    "pictures/introEventPics/E26A1193.jpg",
                    "pictures/introEventPics/E26A1196.jpg",
                    "pictures/introEventPics/E26A1211.jpg",
                    "pictures/introEventPics/E26A1230.jpg",
                    "pictures/introEventPics/E26A1235.jpg",
                    "pictures/introEventPics/E26A1309.jpg",
                    "pictures/introEventPics/E26A1312.jpg",
                    "pictures/introEventPics/E26A1314.jpg"
                  ]'>
            <svg class="notch-figure" viewBox="0 0 800 1000" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
              <defs>
                <mask id="notchMask-2">
                  <rect x="0" y="0" width="100%" height="100%" fill="white" />
                  <rect class="notchRect" x="260" y="920" width="280" height="80" fill="black" />
                </mask>
                <filter id="frameShadow-2" x="-20%" y="-20%" width="140%">
                  <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="rgba(0,0,0,0.18)" />
                </filter>
              </defs>
              <!-- Start on the preferred kids photo -->
              <image href="pictures/introEventPics/E26A1309.jpg" x="0" y="0" width="800" height="1000"
                     preserveAspectRatio="xMidYMid meet" mask="url(#notchMask-2)"></image>
              <g class="frameGroup" filter="url(#frameShadow-2)">
                <path class="u-stroke framePath" d="M .5 .5 H 799.5 V 999.5 H .5 Z" />
                <rect class="u-stroke recessStroke" x="260" y="920" width="280" height="80" />
              </g>
            </svg>

            <button class="tile-nav tile-prev" type="button" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 18L9 12l6-6"/></svg>
            </button>
            <button class="tile-nav tile-next" type="button" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
            </button>

            <div class="tile-dots" aria-label="Slide navigation" role="tablist"></div>
            <!-- label removed as requested -->
          </figure>
        </div>

        <!-- Brief service explanations (no FAQs) -->
        <div class="service-blurbs">
          <div class="row">
            <article class="blurb">
              <h3>Portraits</h3>
              <p>Warm, movement-filled portraits that feel like real life—family, maternity, and newborn sessions in soft Gulf light. Gentle direction, natural connection, and edits that stand the test of time.</p>
              <a class="btn" href="/portraits.html">Explore Portraits</a>
            </article>
            <article class="blurb">
              <h3>Branding</h3>
              <p>Strategy-backed imagery for entrepreneurs and teams—headshots, lifestyle, product, and space. Cohesive visuals that look premium on your site, socials, and launch campaigns.</p>
              <a class="btn" href="/branding.html">Explore Branding</a>
            </article>
            <article class="blurb">
              <h3>Events</h3>
              <p>Story-driven coverage with flattering light and quick turnarounds. From intimate gatherings to conferences, you’ll get a highlight library your audience can feel.</p>
              <a class="btn" href="/events.html">Explore Events</a>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Shared Footer -->
  <div data-include="/partials/footer.html"></div>
  <script src="/assets/include.js?v=nav-5" defer></script>

  <!-- Notch/label/dots positioning -->
  <script>
    (function(){
      const tiles = document.querySelectorAll('.mosaic .captioned.notch');
      if(!tiles.length) return;

      function updateTile(tile){
        const svg = tile.querySelector('svg.notch-figure');
        const notchRect = svg?.querySelector('.notchRect');
        const recessStroke = svg?.querySelector('.recessStroke');
        const label = tile.querySelector('.cap-label'); // may not exist now
        const notchBox = tile.querySelector('.notch-box'); // removed
        if(!svg || !notchRect || !recessStroke) return;

        // If no label exists, collapse the notch so the image remains a full rectangle
        if(!label){
          notchRect.setAttribute('x', 400);    // center
          notchRect.setAttribute('y', 1000);   // below frame
          notchRect.setAttribute('width', 0.01);
          notchRect.setAttribute('height', 0.01);
          recessStroke.setAttribute('x', 400);
          recessStroke.setAttribute('y', 1000);
          recessStroke.setAttribute('width', 0.01);
          recessStroke.setAttribute('height', 0.01);
          const dotsWrap = tile.querySelector('.tile-dots');
          if(dotsWrap){ dotsWrap.style.bottom = '22px'; }
          return;
        }

        // (Kept for backward-compat if labels are re-enabled)
        const padCss = 4, liftCss = 10, dotsGapCss = 14;
        const labelRect = label.getBoundingClientRect();
        const tileRect  = svg.getBoundingClientRect();

        const recessW_css = labelRect.width + padCss * 2;
        const recessH_css = labelRect.height + padCss * 2;

        const sx = 800 / tileRect.width;
        const sy = 1000 / tileRect.height;

        const recessW = recessW_css * sx;
        const recessH = recessH_css * sy;

        const recessX = ((tileRect.width - recessW_css) / 2) * sx;
        const recessY = 1000 - recessH - (padCss * sy) - (liftCss * sy);

        notchRect.setAttribute('x', recessX.toFixed(2));
        notchRect.setAttribute('y', recessY.toFixed(2));
        notchRect.setAttribute('width', recessW.toFixed(2));
        notchRect.setAttribute('height', recessH.toFixed(2));

        recessStroke.setAttribute('x', recessX.toFixed(2));
        recessStroke.setAttribute('y', recessY.toFixed(2));
        recessStroke.setAttribute('width', recessW.toFixed(2));
        recessStroke.setAttribute('height', recessH.toFixed(2));

        const dotsWrap = tile.querySelector('.tile-dots');
        if(dotsWrap){
          dotsWrap.style.bottom = (padCss + recessH_css + dotsGapCss + liftCss) + 'px';
        }
      }

      function updateAll(){ tiles.forEach(t => updateTile(t)); }
      if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(()=>{ requestAnimationFrame(updateAll); });
      } else {
        window.addEventListener('load', updateAll);
      }
      window.addEventListener('resize', ()=>{ requestAnimationFrame(updateAll); });
      setTimeout(updateAll, 0);
    })();
  </script>

  <!-- Randomize Portraits & Events; force specific first images -->
  <script>
    (function () {
      const PORTRAITS_ID = "gallery-meadow"; // left tile
      const EVENTS_ID    = "gallery-beach";  // right tile
      const PREFERRED_EVENTS_FIRST   = "pictures/introEventPics/E26A1309.jpg";
      const PREFERRED_PORTRAIT_FIRST = "pictures/introPortPics/E26A2614%20(1).jpg";

      function shuffle(arr){
        for(let i = arr.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function parseList(tile){
        try { return JSON.parse(tile.getAttribute("data-images") || "[]"); }
        catch { return []; }
      }

      function writeListAndPrimeImage(tile, list){
        tile.setAttribute("data-images", JSON.stringify(list));
        const imgEl = tile.querySelector("svg image");
        if (imgEl && list[0]) {
          imgEl.setAttribute("href", list[0]);
          imgEl.setAttributeNS("http://www.w3.org/1999/xlink", "href", list[0]);
        }
      }

      // Portraits: shuffle, but keep preferred portrait first
      (function(){
        const tile = document.getElementById(PORTRAITS_ID);
        if(!tile) return;
        const list = parseList(tile);
        if(!Array.isArray(list) || list.length <= 1) return;

        shuffle(list);
        const idx = list.indexOf(PREFERRED_PORTRAIT_FIRST);
        if (idx > -1) {
          const [hit] = list.splice(idx, 1);
          list.unshift(hit);
        } else {
          list.unshift(PREFERRED_PORTRAIT_FIRST);
        }
        writeListAndPrimeImage(tile, list);
      })();

      // Events: shuffle but make sure preferred photo is first
      (function(){
        const tile = document.getElementById(EVENTS_ID);
        if(!tile) return;
        const list = parseList(tile);
        if(!Array.isArray(list) || list.length <= 1) return;

        shuffle(list);
        const idx = list.indexOf(PREFERRED_EVENTS_FIRST);
        if (idx > -1) {
          const [hit] = list.splice(idx, 1);
          list.unshift(hit);
        } else {
          list.unshift(PREFERRED_EVENTS_FIRST);
        }
        writeListAndPrimeImage(tile, list);
      })();
    })();
  </script>

  <!-- Slider: tile #1 -->
  <script>
    (function(){
      const tile = document.getElementById('gallery-meadow');
      if(!tile) return;
      const imgEl = tile.querySelector('svg image'); if(!imgEl) return;

      let list; try { list = JSON.parse(tile.getAttribute('data-images') || '[]'); } catch(e){ list = []; }
      if(!Array.isArray(list) || list.length <= 1) return;

      let idx = 0;

      const dotsWrap = tile.querySelector('.tile-dots');
      const dots = [];
      if(dotsWrap){
        for(let i=0;i<list.length;i++){
          const b = document.createElement('button');
          b.type = 'button'; b.setAttribute('role','tab'); b.setAttribute('aria-label','Go to slide ' + (i+1));
          b.addEventListener('click', (e)=>{ e.stopPropagation(); show(i); });
        dotsWrap.appendChild(b); dots.push(b);
        }
      }

      function updateDots(){
        if(!dots.length) return;
        dots.forEach((d,i)=>{ if(i===idx){ d.classList.add('is-active'); d.setAttribute('aria-selected','true'); } else { d.classList.remove('is-active'); d.removeAttribute('aria-selected'); } });
      }

      function show(i){
        idx = (i + list.length) % list.length;
        const src = list[idx];
        imgEl.setAttribute('href', src);
        imgEl.setAttributeNS('http://www.w3.org/1999/xlink','href', src);
        updateDots();
      }

      const prevBtn = tile.querySelector('.tile-prev');
      const nextBtn = tile.querySelector('.tile-next');
      if(prevBtn) prevBtn.addEventListener('click', e => { e.stopPropagation(); show(idx-1); });
      if(nextBtn) nextBtn.addEventListener('click', e => { e.stopPropagation(); show(idx+1); });

      tile.querySelector('svg.notch-figure')?.addEventListener('click', () => show(idx+1));

      updateDots();
    })();
  </script>

  <!-- Slider: tile #2 -->
  <script>
    (function(){
      const tile = document.getElementById('gallery-family');
      if(!tile) return;
      const imgEl = tile.querySelector('svg image'); if(!imgEl) return;

      let list; try { list = JSON.parse(tile.getAttribute('data-images') || '[]'); } catch(e){ list = []; }
      if(!Array.isArray(list) || list.length <= 1) return;

      let idx = 0;

      const dotsWrap = tile.querySelector('.tile-dots');
      const dots = [];
      if(dotsWrap){
        for(let i=0;i<list.length;i++){
          const b = document.createElement('button');
          b.type = 'button'; b.setAttribute('role','tab'); b.setAttribute('aria-label','Go to slide ' + (i+1));
          b.addEventListener('click', (e)=>{ e.stopPropagation(); show(i); });
          dotsWrap.appendChild(b); dots.push(b);
        }
      }

      function updateDots(){
        if(!dots.length) return;
        dots.forEach((d,i)=>{ if(i===idx){ d.classList.add('is-active'); d.setAttribute('aria-selected','true'); } else { d.classList.remove('is-active'); d.removeAttribute('aria-selected'); } });
      }

      function show(i){
        idx = (i + list.length) % list.length;
        const src = list[idx];
        imgEl.setAttribute('href', src);
        imgEl.setAttributeNS('http://www.w3.org/1999/xlink','href', src);
        updateDots();
      }

      const prevBtn = tile.querySelector('.tile-prev');
      const nextBtn = tile.querySelector('.tile-next');
      if(prevBtn) prevBtn.addEventListener('click', e => { e.stopPropagation(); show(idx-1); });
      if(nextBtn) nextBtn.addEventListener('click', e => { e.stopPropagation(); show(idx+1); });

      tile.querySelector('svg.notch-figure')?.addEventListener('click', () => show(idx+1));

      updateDots();
    })();
  </script>

  <!-- Slider: tile #3 -->
  <script>
    (function(){
      const tile = document.getElementById('gallery-beach');
      if(!tile) return;
      const imgEl = tile.querySelector('svg image'); if(!imgEl) return;

      let list; try { list = JSON.parse(tile.getAttribute('data-images') || '[]'); } catch(e){ list = []; }
      if(!Array.isArray(list) || list.length <= 1) return;

      let idx = 0;

      const dotsWrap = tile.querySelector('.tile-dots');
      const dots = [];
      if(dotsWrap){
        for(let i=0;i<list.length;i++){
          const b = document.createElement('button');
          b.type = 'button'; b.setAttribute('role','tab'); b.setAttribute('aria-label','Go to slide ' + (i+1));
          b.addEventListener('click', (e)=>{ e.stopPropagation(); show(i); });
          dotsWrap.appendChild(b); dots.push(b);
        }
      }

      function updateDots(){
        if(!dots.length) return;
        dots.forEach((d,i)=>{ if(i===idx){ d.classList.add('is-active'); d.setAttribute('aria-selected','true'); } else { d.classList.remove('is-active'); d.removeAttribute('aria-selected'); } });
      }

      function show(i){
        idx = (i + list.length) % list.length;
        const src = list[idx];
        imgEl.setAttribute('href', src);
        imgEl.setAttributeNS('http://www.w3.org/1999/xlink','href', src);
        updateDots();
      }

      const prevBtn = tile.querySelector('.tile-prev');
      const nextBtn = tile.querySelector('.tile-next');
      if(prevBtn) prevBtn.addEventListener('click', e => { e.stopPropagation(); show(idx-1); });
      if(nextBtn) nextBtn.addEventListener('click', e => { e.stopPropagation(); show(idx+1); });

      tile.querySelector('svg.notch-figure')?.addEventListener('click', () => show(idx+1));

      updateDots();
    })();
  </script>
</body>
</html>
